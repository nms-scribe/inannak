

/* Preloading using the link format for the fonts speeds up the process of loading, which reduces font flicker on load
/*@import url('https://fonts.googleapis.com/css2?family=Alice&family=Cinzel+Decorative:wght@400;700;900&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Mulish:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;0,1000;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900;1,1000&display=swap');*/



/* FUTURE: When ':has' is fully supported in firefox, I might be able to do :has( #navbar_toggler:checked) to change the variables. I can't test that until then, though. */
/* Set some variables */
:root {
    /* MEASUREMENTS */
    --header-height: 2rem; 
    --header-control-height: var(--header-height); /* in case I want to shrink them */
    --footer-height: 1.5rem;
    --sidebar-width: 15rem;
    --text-width: min(55rem,100vw);
    --content-width: calc(100vw - var(--sidebar-width));
    --content-padding: calc(max((var(--content-width) - var(--text-width))/2,0.25rem));
    --column-gap: 2rem;
    --column-width: calc((var(--text-width) - var(--column-gap))/2);
    /* FONTS */
    --main-body-font: 'Lora', serif;
    --sans-body-font: 'Mulish', sans-serif;
    --header-font: 'Alice', serif;
    --title-font: 'Cinzel Decorative', serif;
    /* each size is about 1.316 (4th root of 3) times the next smaller.
       Basically, I wanted each to increase by the same amount, and I wanted the chapter size to be 3, and there are four levels between body font and chapter font, so after some math, that became the 4th root of 3 */
    --title-size: 5.2rem;
    --part-size: 3.9rem; /* not currently used, but may be soon */
    --chapter-size: 3rem;
    --section-size: 2.3rem;
    --subsection-size: 1.7rem;
    --subsubsection-size: 1.3rem;
    --footnote-size: 0.8rem;
    --fine-size: 0.6rem;
    --tiny-size: 0.4rem;
    /*
    COLORS

    The original colors were inspired by the average color of my first attempt at a map of Inannak (7FB8BB), then reduce to an equivalent hue.

    #####  Color Palette by Paletton.com
    #####  Palette URL: http://paletton.com/#uid=33i0u0kllll4FN0d0tFtFd0N04F


    *** Primary color:

    shade 0 = #226666 = rgb( 34,102,102) = rgba( 34,102,102,1) = rgb0(0.133,0.4,0.4)
    shade 1 = #B4D2D2 = rgb(180,210,210) = rgba(180,210,210,1) = rgb0(0.706,0.824,0.824)
    shade 2 = #548E8E = rgb( 84,142,142) = rgba( 84,142,142,1) = rgb0(0.329,0.557,0.557)
    shade 3 = #053E3E = rgb(  5, 62, 62) = rgba(  5, 62, 62,1) = rgb0(0.02,0.243,0.243)
    shade 4 = #001616 = rgb(  0, 22, 22) = rgba(  0, 22, 22,1) = rgb0(0,0.086,0.086)

    *** Secondary color (1):

    shade 0 = #AA8439 = rgb(170,132, 57) = rgba(170,132, 57,1) = rgb0(0.667,0.518,0.224)
    shade 1 = #FFF3DA = rgb(255,243,218) = rgba(255,243,218,1) = rgb0(1,0.953,0.855)
    shade 2 = #ECCC8C = rgb(236,204,140) = rgba(236,204,140,1) = rgb0(0.925,0.8,0.549)
    shade 3 = #684808 = rgb(104, 72,  8) = rgba(104, 72,  8,1) = rgb0(0.408,0.282,0.031)
    shade 4 = #251900 = rgb( 37, 25,  0) = rgba( 37, 25,  0,1) = rgb0(0.145,0.098,0)

    *** Secondary color (2):

    shade 0 = #AA3939 = rgb(170, 57, 57) = rgba(170, 57, 57,1) = rgb0(0.667,0.224,0.224)
    shade 1 = #FFDADA = rgb(255,218,218) = rgba(255,218,218,1) = rgb0(1,0.855,0.855)
    shade 2 = #EC8C8C = rgb(236,140,140) = rgba(236,140,140,1) = rgb0(0.925,0.549,0.549)
    shade 3 = #680808 = rgb(104,  8,  8) = rgba(104,  8,  8,1) = rgb0(0.408,0.031,0.031)
    shade 4 = #250000 = rgb( 37,  0,  0) = rgba( 37,  0,  0,1) = rgb0(0.145,0,0)


    #####  Generated by Paletton.com (c) 2002-2014

    */

    --content-background-dark: #202020; /* off-black */
    --content-body-dark: #C8C8C8; /* light grey */
    --content-heading-dark: #548E8E; /* primary shade 2 */
    --navigation-background-dark: #226666; /* primary shade 0 */
    --navigation-text-dark: #B4D2D2; /* primary shade 1 */
    --highlight-background-dark: #053E3E; /* primary shade 3 */
    --highlight-text-dark: #B4D2D2; /* primary shade 1 */
    --rule-dark: #AA8439; /* secondary 1 shade 0 */
    --annotation-background-dark: #6848084F; /* secondary 1 shade 3 at about 30% opacity  because the darker shade is too dark. */

    --content-background-light: #F9F9F9; /* off-white */
    --content-body-light: #404040; /* off-black */
    --content-heading-light: #053E3E; /* primary shade 2 */
    --navigation-background-light: #548E8E; /* primary shade 2 */
    --navigation-text-light: #001616; /* primary shade 4 */
    --highlight-background-light: #B4D2D2; /*primary shade 1 */
    --highlight-text-light: #226666; /* primary shade 0 */
    --rule-light: #AA8439; /* secondary 1 shade 0 */ /* NOTE: This was red #AA3939; secondary 2 shade 0 -- I changed it because the red didn't fit well with the green after some time to think about it. */
    --annotation-background-light: #FFF3DA; /* secondary 1 shade 1 */

}


/* lay out controls */

/* hide the toggler checkboxes. They aren't meant to be seen because their placement is restricted to the beginning of the body for them to work */
#navbar_toggler {
    /* The checkbox itself is hidden, use the label for changing it */
    display: none;
}

#theme_toggler {
    display: none;
}

body {
    display: flex;
    margin: 0px;
    height: 100vh;
}
/* Lay out navbar */
.ltx_page_navbar {
    /* allows us to calculate width/height to include padding and border */
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    margin: 0px;
    padding: 0.25rem;
    width: var(--sidebar-width);
    overflow-y: scroll;
}

/* At width 1200 px, the navbar becoms a pulldown menu. This means we can keep the header as is for a while yet. */
@media screen and (width > 1200px) {

    .ltx_page_navbar {
        flex-shrink: 0;    
    }
    
    #navbar_toggler:not(:checked) ~ .ltx_page_navbar {
        display: none;
    }


}

@media screen and (width <= 1200px) {
    .ltx_page_navbar {
        position: absolute;
        left: 0px;
        top: var(--header-height);
        max-height: 100vh; 
    }

    /* with the navbar out of the weigh, the width of main is always 100% */
    .ltx_page_main {
        width: 100%;
    }
    
    /* The toggle is reversed on a small screen, since I have no way of changing the default value for the checkbox, and I want the navbar to default to off for them.
    FUTURE: If I ever store the navbar status in settings, I may need to revisit this.
    */
    #navbar_toggler:checked ~ .ltx_page_navbar {
        display: none;
    }

    :root {
        --content-width: 100vw;

    }

    
}

/* THERE ARE FURTHER MEDIA SECTIONS FURTHER BELOW, because I need to declare them later. */



/* shrink indents of navbar sub list items */
.ltx_page_navbar ul {
    margin: 0px;
    padding-inline-start: 1rem;
    list-style: none;
}

/* First one shouldn't be indented */
.ltx_page_navbar > .ltx_TOC > ul {
    padding-inline-start: 0px;
}

.ltx_page_main {
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* make sure it fills the remaining width of the document.*/
}

/* Lay out page header */
.ltx_page_header {
    /* allows us to calculate width/height to include padding and border */
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box; 
    box-sizing: border-box;
    margin: 0px;
    padding: 0px;
    padding-left: 0px;
    padding-right: 0.5rem; /* otherwise, the search button overlaps with the disappearing scrollbar */
    height: var(--header-height);
    flex-shrink: 0;    
    overflow-y: scroll; /* in case there ever is a need to scroll */
    text-align: center;
    line-height: 1.7rem;
    display: flex;
}



/* Don't display the search form label in the usual header */
form#form-search label[for="input-search"] {
    display: none;
}

/* don't display the submit-search button, we're using a label instead */
form#form-search > #submit-search {
    display: none;
}

/* hide the text for the prev and next links, these are handled as "buttons" added in the ::after/before of the links. */
.ltx_page_header a.ltx_ref[rel="prev"] > span,
.ltx_page_header span.ltx_ref_prev > span,
.ltx_page_header a.ltx_ref[rel="next"] > span,
.ltx_page_header span.ltx_ref_next > span {
    display: none;
}

/* remove the prev and next placeholder spans, but don't hide them. We want them to keep taking up space so alignment doesn't change. */
.ltx_page_header span.ltx_ref_prev,
.ltx_page_header span.ltx_ref_next {
    visibility: hidden;
}


.ltx_page_header > div {
    height: var(--header-height);
}

.ltx_page_header > form {
    height: var(--header-height);
}

/* set up the "buttons" */
.rpg-button,
.ltx_page_header a.ltx_ref[rel],
.rpg-button::before,
.ltx_page_header a.ltx_ref[rel="up"]::after, /* This is visible on small screens */
.ltx_page_header a.ltx_ref[rel="prev"]::after,
.ltx_page_header span.ltx_ref_prev::after,
.ltx_page_header a.ltx_ref[rel="next"]::before,
.ltx_page_header span.ltx_ref_next::before,
.ltx_page_header a.ltx_ref[rel="up"] > span {
    margin: 0px;
    padding: 0px 0.25rem;
    cursor: pointer;
    display: inline-block;
    height: var(--header-control-height);
    vertical-align: middle;
}

.ltx_page_header #tools_appearance {
    display: inline;
    text-align: left;
    width: 30%;
}

.ltx_page_header #tools_navigation {
    display: inline;
    text-align: center;
    width: 40%;
}

.ltx_page_header #form-search-placeholder {
    display: inline;
    width: 30%;
}

.ltx_page_header #form-search {
    display: inline;
    text-align: right;
    width: 30%;
}

.ltx_page_header #form-search input {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    margin: 0px;
    padding: 0px 0.25rem;
    display: inline-block;
    height: calc(var(--header-control-height)-2px);
    width: 10rem;
    vertical-align: middle;
    line-height: 1.6rem; /* this seems to work better */
    border-style: solid;
    border-width: 1px;
    border-radius: 0.8rem;
}

/* lay out page content */
.ltx_page_content {
    /* allows us to calculate width/height to include padding and border */
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box; 
    box-sizing: border-box;
    margin: 0px;
    flex-grow: 1;
    padding: 0.5rem var(--content-padding);
    overflow-y: scroll;
}

.ltx_page_content #form-search {
    text-align: center;
    vertical-align: middle;
}

.ltx_page_content #form-search input {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    margin: 0px;
    padding: 0px 0.25rem;
    display: inline-block;
    height: 2.5rem;
    width: calc(var(--text-width) - 10em);
    vertical-align: middle;
    line-height: 1.6rem; /* this seems to work better */
    border-style: solid;
    border-width: 1px;
    border-radius: 1.25rem;
}

.ltx_page_content #form-search .rpg-button {
    line-height: 1.8rem;;
}

/* lay out page footer */
/* And fix the footer to the bottm */
.ltx_page_footer {
    /* allows us to calculate width/height to include padding and border */
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box; 
    box-sizing: border-box;
    margin: 0px;
    padding: 0px;
    height: var(--footer-height);
    flex-shrink: 0;    
    display: flex;
    overflow-y: scroll;
}



.ltx_page_footer .ltx_page_logo {
    text-align: right;
    margin-top: 8px;
    flex-grow: 0;
    flex-shrink: 0;
}

.ltx_page_footer .ltx_page_logo img {
    vertical-align: bottom;
}

.ltx_page_footer > .ltx_para {
    /* FUTURE: If I set this to center, it centers the legal text between the left edge of .ltx_page_logo and the left edge of this div, which doesn't actually look centered. One way to truly center the legal text requires knowing the width of .ltx_page_logo. Use that number in padding-left of the legal text div, and it produces better results. If CSS ever supports retrieving a value from another element, I could do that. */
    text-align: left;
    flex-grow: 1;
}

.ltx_page_footer > .ltx_para > p {
    margin-top: 3px;
    margin-bottom: 0px;
    padding-left: 0.25rem;
}

/* FONTS */

.rpg-creature-stats {
    font-family: var(--sans-body-font);
}

.rpg-creature-stats .rpg-creature-infoline {
    font-family: var(--main-body-font);
    font-style: italic;
}

.rpg-creature-stats .rpg-creature-feature {
    font-family: var(--main-body-font);
}

.rpg-creature-stat-key {
    font-weight: bold;
}

.rpg-location-ref {
    font-style: italic;
}

.rpg-treasure-ref {
    font-style: italic;
}

.rpg-creature-ref {
    font-style: italic; /* Yes, in D&D, these are bold, but I want to be consistent */
}

.rpg-spell-ref {
    font-style: italic;
}

section.rpg-credits .ltx_para {
    font-family: var(--sans-body-font);
}

section.rpg-credits .rpg-credit-header {
    font-weight: bold;
    font-variant: small-caps;
}

section.rpg-credits .rpg-credits-disclaimer,
section.rpg-credits .rpg-credits-legal {
    font-size: var(--footnote-size);
    font-style: italic;
}

.ltx_page_header a.ltx_ref[rel="up"] span {
    font-family: var(--header-font);
    font-variant: small-caps;
    font-weight: bold;
}

.rpg-button::before, 
.ltx_page_header a.ltx_ref[rel="up"]::after, /* this is visible on small screens */
.ltx_page_header a.ltx_ref[rel="prev"]::after,
.ltx_page_header span.ltx_ref_prev::after,
.ltx_page_header a.ltx_ref[rel="next"]::before,
.ltx_page_header span.ltx_ref_next::before {
    /* This is an icon from fonts.google.com/icons */
    font-family: 'Material Symbols Outlined';
    font-variation-settings:
      'FILL' 0,
      'wght' 400,
      'GRAD' 0,
      'opsz' 24;
}

.ltx_page_footer .ltx_page_logo {
    font-size: var(--fine-size);
}

.ltx_page_footer .ltx_page_logo a {
    font-variant: small-caps;
}


.ltx_page_footer .ltx_para {
    font-size: var(--footnote-size);
    font-style: italic;
}

.ltx_page_content form#form-search {
    font-size: var(--subsection-size);
}

.ltx_page_content form#form-search input {
    font-size: var(--subsection-size);
}

/* Styling the "Buttons" */
/* Change the symbol of the toggler */
#navbar_toggler_label:before {
    content: "\E5D2"; /* was â˜°*/
}

#theme_toggler:checked ~ div #theme_toggler_label:before {
    content: "\E518"; /* was ðŸ”†*/
}

#theme_toggler:not(:checked) ~ div #theme_toggler_label:before {
    content: "\E51C"; /* was ðŸ”…*/
}

#submit_search_label::before {
    content: "\E8B6"; /* was ðŸ”*/
}

.ltx_page_header a.ltx_ref[rel="prev"]::after,
.ltx_page_header span.ltx_ref_prev::after {
    content: "\E045"; /* was â®*/
}


.ltx_page_header a.ltx_ref[rel="next"]::before,
.ltx_page_header span.ltx_ref_next::before {
    content: "\E044"; /* was â­*/
}

/* Set up colors */

#theme_toggler:checked ~ #navbar_toggler_label { 
    color: var(--navigation-text-dark);
    background-color: var(--navigation-background-dark);
}

#theme_toggler:checked ~ nav.ltx_page_navbar { 
    color: var(--navigation-text-dark);
    background-color: var(--navigation-background-dark);
}

#theme_toggler:checked ~ div.ltx_page_main { 
    color: var(--content-body-dark);
    background-color: var(--content-background-dark);
    border-color: var(--highlight-text-dark);
}

#theme_toggler:checked ~ div.ltx_page_main > header { 
    color: var(--content-heading-dark);
    background-color: var(--content-background-dark);
}

#theme_toggler:checked ~ div.ltx_page_main > div { 
    color: var(--content-body-dark);
    background-color: var(--content-background-dark);
}

#theme_toggler:checked ~ div.ltx_page_main .ltx_title { 
    color: var(--content-heading-dark);
}

#theme_toggler:checked ~ div.ltx_page_main > footer { 
    color: var(--content-heading-dark);
    background-color: var(--content-background-dark);
}

#theme_toggler:checked ~ div.ltx_page_main > div.ltx_page_content .ltx_TOC {
    color: var(--content-heading-dark);
}


/* Get rid of link colors */
#theme_toggler:checked ~ :is(div, nav) .ltx_ref {
    color: inherit;
}

/* NOTE: I had to add the '*' because otherwise background-color was ignored in search results. I'm still not certain why. The code inspector in firefox didn't even show the property to indicate that it was ignored. */
#theme_toggler:checked ~ :is(div, nav) .ltx_ref:hover *,
#theme_toggler:checked ~ :is(div, nav) .ltx_ref:hover,
#theme_toggler:checked ~ div .rpg-button:hover,
#theme_toggler:checked ~ nav span.ltx_ref_self * {
    color: var(--highlight-text-dark);
    background-color: var(--highlight-background-dark);
}


#theme_toggler:checked ~ div .ltx_quote {
    color: var(--highlight-text-dark);
    border-color: var(--rule-dark);
    background-color: var(--annotation-background-dark);
}

#theme_toggler:checked ~ div .rpg-annotation {
    color: var(--highlight-text-dark);
    border-color: var(--rule-dark);
    background-color: var(--annotation-background-dark);
}

#theme_toggler:checked ~ div .ltx_title_section {
    border-color: var(--rule-dark);
}

#theme_toggler:checked ~ div .ltx_tabular tbody .ltx_tr:nth-child(odd) {
    background-color: var(--annotation-background-dark);
}

#theme_toggler:checked ~ div div.rpg-creature-stats {
    background-color: var(--annotation-background-dark);
}

#theme_toggler:checked ~ div div.rpg-creature-info h2:first-of-type {
    border-color: var(--rule-dark);
}

#theme_toggler:checked ~ div .rpg-creature-stat-key {
    color: var(--content-heading-dark);
}

#theme_toggler:checked ~ div .rpg-title-rule {
    border-bottom: 1px solid var(--rule-dark);
    display: flex;
}

#theme_toggler:checked ~ div .ltx_authors {
    color: var(--content-heading-dark);
}

#theme_toggler:checked ~ div .ltx_dates {
    color: var(--content-heading-dark);
}

#theme_toggler:checked ~ div #form-search input {
    background-color: var(--highlight-background-dark);
    color: var(--highlight-text-dark);
    border-color: var(--rule-dark);
}


/* Light mode */
#theme_toggler:not(:checked) ~ #navbar_toggler_label { 
    color: var(--navigation-text-light);
    background-color: var(--navigation-background-light);
}

#theme_toggler:not(:checked) ~ nav.ltx_page_navbar { 
    color: var(--navigation-text-light);
    background-color: var(--navigation-background-light);
}

#theme_toggler:not(:checked) ~ div.ltx_page_main { 
    color: var(--content-body-light);
    background-color: var(--content-background-light);
}

#theme_toggler:not(:checked) ~ div.ltx_page_main > header { 
    color: var(--content-heading-light);
    background-color: var(--content-background-light);
}

#theme_toggler:not(:checked) ~ div.ltx_page_main > div { 
    color: var(--content-body-light);
    background-color: var(--content-background-light);
}

#theme_toggler:not(:checked) ~ div.ltx_page_main .ltx_title { 
    color: var(--content-heading-light);
}

#theme_toggler:not(:checked) ~ div.ltx_page_main > footer { 
    color: var(--content-heading-light);
    background-color: var(--content-background-light);
}

#theme_toggler:not(:checked) ~ div.ltx_page_main > div.ltx_page_content .ltx_TOC {
    color: var(--content-heading-light);
}



/* Get rid of link colors */
#theme_toggler:not(:checked) ~ :is(div, nav) .ltx_ref {
    color: inherit;
}

/* NOTE: I had to add the '*' because otherwise background-color was ignored in search results. I'm still not certain why. The code inspector in firefox didn't even show the property to indicate that it was ignored. */
#theme_toggler:not(:checked) ~ :is(div, nav) .ltx_ref:hover *,
#theme_toggler:not(:checked) ~ :is(div, nav) .ltx_ref:hover,
#theme_toggler:not(:checked) ~ div .rpg-button:hover,
#theme_toggler:not(:checked) ~ nav span.ltx_ref_self * {
    color: var(--highlight-text-light);
    background-color: var(--highlight-background-light);
}


#theme_toggler:not(:checked) ~ div .ltx_quote {
    color: var(--highlight-text-light);
    border-color: var(--rule-light);
    background-color: var(--annotation-background-light);
}

#theme_toggler:not(:checked) ~ div .rpg-annotation {
    color: var(--highlight-text-light);
    border-color: var(--rule-light);
    border-width: 2px; /* light one has to be a little thicker as otherwise the color isn't noticeable */
    background-color: var(--annotation-background-light);
}

#theme_toggler:not(:checked) ~ div .ltx_title_section {
    border-color: var(--rule-light);
    border-width: 2px; /* light one has to be a little thicker as otherwise the color isn't noticeable */
}

#theme_toggler:not(:checked)  ~ div .ltx_tabular tbody .ltx_tr:nth-child(odd) {
    background-color: var(--annotation-background-light);
}

#theme_toggler:not(:checked) ~ div div.rpg-creature-stats {
    background-color: var(--annotation-background-light);
}

#theme_toggler:not(:checked) ~ div div.rpg-creature-info h2:first-of-type {
    border-color: var(--rule-light);
    border-width: 2px; /* light one has to be a little thicker as otherwise the color isn't noticeable */
}

#theme_toggler:not(:checked) ~ div .rpg-creature-stat-key {
    color: var(--content-heading-light);
}

#theme_toggler:not(:checked) ~ div .rpg-title-rule {
    border-bottom: 2px solid var(--rule-light);
    display: flex;
}

#theme_toggler:not(:checked) ~ div .ltx_authors {
    color: var(--content-heading-light);
}

#theme_toggler:not(:checked) ~ div .ltx_dates {
    color: var(--content-heading-light);
}

#theme_toggler:not(:checked) ~ div #form-search input {
    background-color: var(--highlight-background-light);
    color: var(--highlight-text-light);
    border-color: var(--rule-light);
}


/* Set up fonts */
body {
    font-family: var(--main-body-font);
}

.ltx_caption {
    font-family: var(--sans-body-font);
    font-weight: bold;
    font-size: var(--subsubsection-size);
}

table.ltx_tabular {
    font-family: var(--sans-body-font);
}

/* font-weight is taken care of with the bold text classes. I could get rid of this completely by turning off the guess headers option in the latexml package load in the latex code, but I do want the th.
FUTURE: I wish the guess headers would only guess the top row, not the left column as well.
*/
table.ltx_tabular th {
    font-weight: normal;
}

.ltx_title {
    font-family: var(--header-font);
    font-variant: small-caps;
    font-weight: 700;
}

.ltx_title_document {
    font-family: var(--title-font);
    font-weight: 900;
    font-variant: small-caps;
    font-size: var(--title-size);
    text-align: center;
    line-height: 1.1em;
}

/* The first header on the page always gets a title font. */
.ltx_page_content > section:first-of-type > .ltx_title:first-of-type {
    font-family: var(--title-font);
    font-weight: 700;
    font-variant: small-caps;
    text-align: center;
}

.ltx_title_part {
    font-size: var(--part-size);
}


.ltx_title_chapter, .ltx_title_appendix {
    font-size: var(--chapter-size);
}

.ltx_title_section {
    font-size: var(--section-size);
    border-bottom: 1px solid; 
}

.ltx_title_subsection {
    font-size: var(--subsection-size);
}

.ltx_title_subsubsection {
    font-size: var(--subsubsection-size);
}

.ltx_title_paragraph {
    font-size: 1rem;
    display: inline;
    margin: 1rem 0px;
}

.ltx_title_paragraph   { 
    font-family: var(--main-body-font);
    font-size: 1rem; 
    display:inline;
    font-variant: normal;
    font-style: italic;
}

.rpg-chapter-flourish {
    font-variant: small-caps;
    font-size: var(--subsubsection-size);
    line-height: 1rem;
}

.ltx_title_paragraph::after {
    content: ".";
}

.ltx_title_paragraph:empty {
    display: none;
}

.ltx_title_paragraph:empty:after {
    display: none;
}

.ltx_paragraph .ltx_title,
.ltx_paragraph .ltx_title + .ltx_para,
.ltx_paragraph .ltx_title + .ltx_para > .ltx_p { 
    display:inline; 
}

.ltx_title_subparagraph  { 
    font-family: var(--main-body-font);
    font-size: 1rem; 
    display:inline;
    font-variant: normal;
}

.ltx_title_subparagraph::after {
    content: ".";
}

.ltx_title_subparagraph:empty {
    display: none;
}

.ltx_title_subparagraph:empty:after {
    display: none;
}

.ltx_subparagraph .ltx_title,
.ltx_subparagraph .ltx_title + .ltx_para,
.ltx_subparagraph .ltx_title + .ltx_para > .ltx_p { 
    display:inline; 
}

.ltx_paragraph {
    margin: 1rem 0px;
}

.ltx_subparagraph:first-of-type {
    /* Need to make sure the subparagraph is separated from it's parent paragraphs, but not from the other ones. */
    margin-top: 1rem;
}

.ltx_subparagraph {
    padding-left: 2rem;
    text-indent: -2rem;
}

.ltx_p {
    margin: 1rem 0px;
}

.ltx_font_italic { /* FUTURE: These should really be 'em' or 'i', but there's no way to know in LaTeXML if you want that or just a style. */
    font-style: italic;
}

.ltx_font_bold { /* FUTURE: These should really be 'strong' or 'b' (see above)*/
    font-weight: bold;
}

/* references in the navibation controls should be sans-serif */
nav.ltx_page_navbar .ltx_ref .ltx_text, 
header.ltx_page_header .ltx_ref .ltx_text, 
footer.ltx_page_footer .ltx_ref .ltx_text {
    font-family: var(--sans-body-font);
}

header.ltx_page_header {
    font-size: var(--subsubsection-size);
}

header.ltx_page_header input {
    font-size: var(--subsubsection-size);
}

nav.ltx_page_navbar > .ltx_ref[rel="start"] span,
nav.ltx_page_navbar > span.ltx_ref_self:first-of-type span {
    font-weight: bold;
    font-variant: small-caps;
}

nav.ltx_page_navbar li.ltx_tocentry_part > .ltx_ref,
nav.ltx_page_navbar li.ltx_tocentry_chapter > .ltx_ref,
nav.ltx_page_navbar li.ltx_tocentry_appendix > .ltx_ref,
nav.ltx_page_navbar li.ltx_tocentry_section > .ltx_ref {
    font-weight: bold;
}

nav.ltx_page_navbar li.ltx_tocentry_part > .ltx_ref {
    font-variant: small-caps;
}


.ltx_quote {
    font-family: var(--sans-body-font);
}

.rpg-annotation {
    font-family: var(--sans-body-font);
}

.rpg-annotation .rpg-annotation-header {
    font-weight: bold;
    font-variant: small-caps;
    font-size: var(--subsubsection-size);
}


.rpg-treasure-subheading {
    font-style: italic;
}

.ltx_page_content article.ltx_document div.ltx_authors {
    font-variant: small-caps;
    font-size: var(--subsection-size);
    font-weight: bold;
}

.ltx_page_content article.ltx_document div.ltx_dates {
    font-style: italic;
    font-size: 0.6rem;
}

.ltx_page_content article.ltx_document .rpg-subtitle {
    font-variant: small-caps;
    font-size: var(--subsubsection-size);
    font-weight: bold;
}

.ltx_page_content article.ltx_document .rpg-tagline {
    font-variant: small-caps;
    font-weight: bold;
}

.ltx_page_content .ltx_TOC {
    font-family: var(--sans-body-font);
    font-variant: small-caps;
}



/*.ltx_page_content article.ltx_document .rpg-coverintro {
}*/

/* links  and navigation */
a {
    text-decoration: underline dotted;
}

#search-results a {
    text-decoration: none;
}

nav.ltx_page_navbar .ltx_ref, 
header.ltx_page_header .ltx_ref, 
footer.ltx_page_footer .ltx_ref {
    text-decoration: none;
}

.ltx_page_content .ltx_TOC a {
    text-decoration: none;
}

nav.ltx_page_navbar .ltx_ref > span {
/* Makes the links in the navbar fill to the right edge bar when they are colored differently. */
    display: flex;
}

nav.ltx_page_navbar li.ltx_tocentry_chapter,
nav.ltx_page_navbar li.ltx_tocentry_appendix,
nav.ltx_page_navbar li.ltx_tocentry_section {
    margin-top: 0.25rem;
}



/* quotations */

.ltx_quote {
    padding: 0.5rem 1rem;
    border-right: 1px solid;
    border-left: 1px solid;
}

.rpg-annotation {
    margin-top: 1rem;
    margin-left: 2.5rem;
    margin-right: 2.5rem;
    padding: 0 1rem;
    border-top: 1px solid;
    border-bottom: 1px solid;

}

/* bulleted lists */
/* FUTURE: I may have to revisit this if I ever come up with other types of lists, or if I get nested lists and it doesn't work. Might also have to revisit this if the font-family changes and makes a narrower bullet character. */
div.ltx_para ul.ltx_itemize  {
    /* Sets the padding to 1rem, so it only indents enough for the bullet.
    NOTE: There is a problem of course, as the bullet width is only 15.37px, whereas 1rem is 16px (at least in my browser test). This means the bullet is slightly misaligned, but perhaps not visibly. However, other methods I found in a google search failed for one of:
    1. list-style-position: inside -- the marker ended up "inside" the element, whicn means text beyond the first line was outdented to the left. I would have to fix this with a hanging indent style thingie anyway.
    2. The ::marker pseudo does not allow specifying the width of the marker, and a number of other positioning properties which could fix the issue simply.
    3. Replacing the marker with a ::before element with bullet content caused too many alignment problems with the following paragraphs that needed to be patched with further CSS.
    */
    padding-inline-start: 1rem;
}

/* Tables */
table.ltx_tabular {
    /* LatexML includes a 'width' in the style element of the tables. FUTURE: I might also get rid of these by allowing the theme or media to override table formatting (and use `tabular` instead of `tabular*`. There may be some way to fix the XSLT as well, but this seems like a quick fix. */
    width: initial !important;
    margin-left: 2.5rem;
    margin-right: 2.5rem;
    border-collapse: collapse;
}

table.ltx_tabular .ltx_td {
    width: initial !important; /* See tabular above */
    padding-top: 0.25rem;
    padding-bottom: 0.25rem;
    padding-left: 0.5rem;
    padding-right: 0.5rem;
    vertical-align: top;
}

table.ltx_tabular thead th.ltx_td:last-of-type {
    /* No padding or borders on the right side of the table */
    padding-right: 0px;
}

table.ltx_tabular th.ltx_td:first-of-type {
    /* No padding or borders on the left side of the table */
    padding-left: 0px;
}

table.ltx_tabular td.ltx_td:last-of-type {
    /* No padding or borders on the right side of the table */
    padding-right: 0px;
}

table.ltx_tabular .ltx_td p {
    margin-top: 0px;
    margin-bottom: 0px;
}

table.ltx_tabular .ltx_td.ltx_align_left {
    text-align: left;
}

table.ltx_tabular .ltx_td.ltx_align_center {
    text-align: center;
}

table.ltx_tabular .ltx_td.ltx_align_right {
    text-align: right;
}

table.ltx_tabular .ltx_td.ltx_align_justified {
    text-align: justify;
}

/* Make sure a figuure set for a table is also the same width as the table */
figure.ltx_table {
    margin-left: 2.5rem;
    margin-right: 2.5rem;
}

/* Some special structures */

section.rpg-creature {
    column-width: var(--column-width);
    column-gap: var(--column-gap);
    column-fill: balance; /* the other option, 'auto', actually tries to put everything in one column, so apparently it only works if there's a limit in height, such as if this were paged. balance is actually the default, but I'm setting this here so I can comment on it. */
    margin-top: 2rem;
    padding-bottom: 2rem;
}

section.rpg-creature:last-of-type {
    border-bottom: none;
}

div.rpg-creature-info h2:first-of-type {
    -webkit-column-span:all;
    -moz-column-span:all;
    column-span:all;
    margin-top: 0px;
    border-bottom: 1px solid;
}

section.rpg-creature section.ltx_subsubsection {
    break-inside: avoid;
}

div.rpg-creature-stats {
    padding: 0.5rem;
}

.rpg-creature-stats p {
    margin-top: 0.25rem;
    margin-bottom: 0.25rem;
}

.rpg-creature-stats .rpg-creature-feature p {
    margin-top: 1rem;
    margin-bottom: 1rem;
}

.rpg-creature-stat-key {
    margin-right: 0.5rem;
    margin-left: 0.5rem; /* Creates a separation between the stats in sans-serif and the rest in serif font. */
}

/* FUTURE: this element should have a .rpg-creature-abilities class */
div.rpg-creature-stats table.ltx_tabular {
    margin-left: 0px;
    margin-right: 0px;
    margin-top: 0.25rem;
    margin-bottom: 0.25rem;
}

div.rpg-creature-stats table.ltx_tabular tbody .ltx_tr {
    background-color: transparent !important; /* Remove the odd-row coloring */
}

div.rpg-creature-stats table.ltx_tabular tbody .ltx_td {
    padding-top: 0px;
    padding-bottom: 0px;
}

.ltx_page_content article.ltx_document .ltx_title_document {
    margin-top: 2rem;
    margin-bottom: 2rem;
    /* I want the title to spread out across the content */
    margin-left: calc((max(var(--content-width) - var(--text-width),0.25rem))/-2);
    margin-right: calc((max(var(--content-width) - var(--text-width),0.25rem))/-2);
    word-wrap: break-word;
    -moz-hyphens: auto;
    -webkit-hyphens: auto;
    hyphens: auto; /* NOTE: I can't get this to work, even if I try a lang attribute on the html element. The word-wrap option does work, though.*/
}

/* I can't find an easy way to get rid of these, so just hide them. */
.ltx_page_content article.ltx_document .ltx_dates {
    display: none;
}

/* Center stuff on the title page */
.ltx_page_content article.ltx_document > :is(div.ltx_authors, div.ltx_dates, div.ltx_para, figure.rpg-coverimage) {
    text-align: center;
}

.ltx_page_content article.ltx_document div.ltx_para span.rpg-coverintro {
    /* Basically, I want to center all the ltx_para except this one. However, there's no CSS selector which is based on contents, so there's no way to identify it. so, align it to the left here, and set display to block so the text-align does something. */
    text-align: left;
    display: block;
}

/* But not if there's a section on the same page */
.ltx_page_content article.ltx_document section {
    text-align: inherit;
}

/* Make the cover image fit */
.ltx_page_content article.ltx_document figure.rpg-coverimage img {
    object-fit: contain;
    width: 100%;
    height: auto;
}

/* I want the TOC list at the bottom to be a little separate if there's a paragraph above it. */
.ltx_page_content div.ltx_para + div.ltx_TOC {
    margin-top: 3rem;
}

/* But not the other ones after that */
.ltx_page_content div.ltx_TOC ~ div.ltx_TOC {
    margin-top: 0px;
}

.ltx_page_content div.ltx_TOC ul {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
}


.ltx_page_content .ltx_TOC .ltx_toclist li {
    list-style-type: none;
}

section.rpg-credits {
    column-width: var(--column-width);
    column-gap: var(--column-gap);
    column-fill: balance; /* the other option, 'auto', actually tries to put everything in one column, so apparently it only works if there's a limit in height, such as if this were paged. balance is actually the default, but I'm setting this here so I can comment on it. */
}

section.rpg-credits h1 {
    -webkit-column-span:all;
    -moz-column-span:all;
    column-span:all;
}

section.rpg-credits .rpg-credits-disclaimer {
    -webkit-column-span:all;
    -moz-column-span:all;
    column-span:all;
}

section.rpg-credits .rpg-credits-legal {
    -webkit-column-span:all;
    -moz-column-span:all;
    column-span:all;
}

section.rpg-credits dl {
    margin-top: 0px;
}

section.rpg-credits dt:not(.rpg-group-credit) {
    display: inline-block;
}

section.rpg-credits dd:not(.rpg-group-credit) {
    display: inline;
    margin-left: 0px; /* There's a whitespace already there. */
}

section.rpg-credits dd:not(.rpg-group-credit)::after {
    content: '';
    display: block; /* makes sure there's a break between the definitions */
}

section.rpg-credits dd:not(.rpg-group-credit) > div {
    display: inline;
}

section.rpg-credits dd:not(.rpg-group-credit) > div > p {
    display: inline;
}

section.rpg-credits dd.rpg-group-credit > div > p:first-child {
    margin-top: 0px;
    break-inside: avoid;
}

section.rpg-credits .rpg-credits-disclaimer {
    /* Need spacer before this shos up */
    margin-top: 3rem;
}

section.rpg-credits .rpg-credits-legal {
    margin-top: 2rem;
    margin-bottom: 0px;
}


section.rpg-credits .rpg-credits-disclaimer p,
section.rpg-credits .rpg-credits-legal p {
    margin-top: var(--fine-size);
    margin-bottom: var(--fine-size);
}

figure.ltx_figure {
    text-align: center;
}

img.ltx_graphics {
    max-width: 100%;
    height: auto;
}


/* At width 900 px, the search input disappears. This is okay because the search button still takes you to the search page, where you can still enter a query. We also start
shortening the generated by text. */
@media screen and (width <= 900px) {
    
    .ltx_page_header #form-search #input-search {
        display: none;
    }

    .ltx_page_header #tools_appearance {
        width: 20%;
    }
    
    .ltx_page_header #tools_navigation {
        width: 60%;
    }
    
    .ltx_page_header #form-search-placeholder {
        width: 20%;
    }
    
    .ltx_page_header #form-search {
        width: 20%;
    }    

    .ltx_page_logo > span:first-child {
        display: none;
    }
    
}

/* At 800 px, the generated by logo text is removed, leaving only the image */
@media screen and (width <= 800px) {

    .ltx_page_logo > a > span {
        display: none;
    }
    
}

/* At less than 700 px, the up link becomes a button, and the latexml logo is finally removed. */
@media screen and (width <= 700px) {

    .ltx_page_header a.ltx_ref[rel="up"] > span {
        display: none;
    }
            
    .ltx_page_header a.ltx_ref[rel="up"]::after {
        content: "\E88A"; 
    }

    .ltx_page_header #tools_appearance {
        width: 15%;
        flex-grow: 1;
    }
    
    .ltx_page_header #tools_navigation {
        width: 20%;
        flex-grow: 1;
    }
    
    .ltx_page_header #form-search-placeholder {
        width: 15%;
        flex-grow: 1;
    }
    
    .ltx_page_header #form-search {
        width: 15%;
        flex-grow: 1;
    }

    .ltx_page_logo {
        display: none;
    }

    .ltx_page_footer > .ltx_para {
        text-align: center;
        font-size: var(--tiny-size);
    }


}

/* At less than 500 px, the font sizes diminish */
@media screen and (width <= 500px) {
    :root {
    /* each size is about 1.189 (4th root of 2) times the next smaller.
       Basically, I wanted each to increase by the same amount, and I wanted the chapter size to be 3, and there are four levels between body font and chapter font, so after some math, that became the 4th root of 3 */
       --title-size: 2.8rem;
       --part-size: 2.4rem; /* not currently used, but may be soon */
       --chapter-size: 2rem;
       --section-size: 1.7rem;
       --subsection-size: 1.4rem;
       --subsubsection-size: 1.2rem;
       --footnote-size: 0.8rem;
       --fine-size: 0.6rem;
       --tiny-size: 0.4rem;
       --footer-height: 1rem;
    
    }
   
}